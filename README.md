# vertualMarker
determine the virtual marker position from the side bending vision edge map

[목적]이 프로그램은 OLED 패널의 PCBL부분의 Bending 공정에서 옆부분을 봤을때 읽을 수 있는 윤곽선에서 항상 일정한 기준점을 설정하기 위한 프로그램으로 여러가지 전략을 통해 정확한 기준점을 찾는다.
그 다음 정확한 기준점을 바탕으로 원하는 곡선부분을 특정하고 그 곡선의 점들에 순서번호를 부여한다.

전략 1. 가장 가까운 쌍둥이 곡선 찾기

1. 주어진 좌표 txt 파일을 읽고, 연결된 선들중 가장 길이가 긴 두개의 선을 찾는다.
2. 두개의 선 중 더 긴부분이 LC 짧은 부분은 SC로 명명한다.
3. 사전에 설정된 패널의 추정길이값=PBL값을 사용자에게 받는다.
4. PBL값이 정해지면 LC의 연결된 선에서 PBL값만큼의 부분선이 선택되고 SC의 연결된 선에서 PBL값만큼의 부분선이 선택되었을때 두 부분선 사이의 거리가 가장 가까워지는 경우의 수를 찾는다.
5. 이때 각 부분선을 쌍둥이 곡선으로 정의하고 해당 부분선들의 좌표값을 저장한다.

전략 2. 거북이 머리 더듬기

1. OLED 패널의 PCBL부분의 Bending 공정에서 옆부분을 봤을때 읽을 수 있는 윤곽선 이미지에서 추출된 주어진 점들의 좌표값들이 들어있는 txt 파일을 읽고, 연결된 선들중 가장 길이가 긴 두개의 선을 찾는다.
2. GUI를 통해 사용자에게 설정값을 받는다. 사용자에게 반드시 받아야 하는 설정값의 기호는 FH(Forehead), UH(Upperhead), SX(ShiftX), SY(ShiftY), PBL(Panel bending length) 이다 
3. 두 선중에서 y축 방향에서 가장 아래에 있는 점 두개 중 더 아래에 있는 점을 포함하고 있는 선이 거북이 선이다.
4. 거북이 선에서 먼저 아래쪽 시작점을 찾고 거북이 선 시작점, TLSP(Turtle line starting point)로 명명하고 x,y축 좌표를 저장해라. 거북이 선의 두 끝점 중에서 더 아래에 있는 끝점이 시작점이다.
5. 거북이 선의 시작점에서부터 반대쪽으로 순서대로 가장 가까운 부분부터 순서대로 선을 읽어나간다. 선을 읽어나가다가 처음으로 y축에 평행한 FH(사용자에게 받아야 하는 픽셀 길이값) 픽셀 이상의 직선을 만나는 경우 이 직선을 거북이 앞머리끝으로 명명하고 연결된 직선의 좌표를 저장한다.
6. 거북이 앞머리끝을 지나서 계속 선을 읽어나간다. 계속 선을 읽어나가다가 처음으로 x축에 평행한 UH(사용자에게 받아야 하는 픽셀 길이값) 팍샐 이상의 직선을 만나는 경우 이 직선을 거북이 윗머리끝으로 명명하고 연결된 직선의 좌표를 저장한다.
7. 거북이 앞머리끝 직선의 x축값과 거북이 윗머리끝 직선의 y축 값을 가지는 점을 가상마커 Mv로 명명하고 값을 저장한다.
8. 시작시 사용자에게 받은 SX와 SY값을 이용한다. 가상마커 Mv의 좌표에서 x축으로 SX만큼 y축으로 SY 만큼 평행이동했을때의 점과 가장 가까운 거북이 선의 점 좌표점을 벤딩이 시작되는 시작점인 BSP(bending starting point)으로 명명한다.
9. BSP 점에서부터 시작해서 거북이 선 시작점(TLSP)으로 이어지는 방향의 반대방향으로 거북이 선을 따라가면서 각 점들에 순서번호를 부여한다. 순서번호는 1부터 PBL 값까지 이어지며, PBL값까지 순서번호를 부여하고 나면 끝난다.
10. 순서번호가 부여된 점들을 따로 txt 파일로 저장하고, txt 파일의 좌표값들을 화면에 이미지로 시작화하여 보여준다. 각 점들의 x,y 좌표값을 그대로 이용하고, 순서번호는 색상을 통해 시각화하여 2차원 평면에 모두 나타낸다. 시각화한 이미지는 이미지 파일로 저장한다.
